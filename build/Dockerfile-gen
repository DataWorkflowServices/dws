FROM golang:1.11.2

ENV GO111MODULE=off

RUN go get k8s.io/code-generator; exit 0
RUN go get k8s.io/apimachinery; exit 0
RUN go get k8s.io/gengo/namer; exit 0
RUN go get k8s.io/klog; exit 0
RUN mkdir -p $GOPATH/src/golang.org/x/ && \
	cd $GOPATH/src/golang.org/x/ && \
	git clone https://github.com/golang/tools.git; exit 0
RUN mkdir -p $GOPATH/src/github.com/spf13/ && \
	cd $GOPATH/src/github.com/spf13/ && \
	git clone https://github.com/spf13/pflag.git; exit 0

ARG repo="${GOPATH}/src/stash.us.cray.com/dpm/dws-operator"

RUN mkdir -p $repo

WORKDIR $GOPATH/src/k8s.io/code-generator

VOLUME $repo
